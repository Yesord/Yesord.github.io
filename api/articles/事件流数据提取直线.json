{"title":"事件流数据提取直线","uid":"6a624db9cd9d3612f9788dcb3f188088","slug":"事件流数据提取直线","date":"2025-02-17T11:41:20.000Z","updated":"2025-02-18T09:19:26.461Z","comments":true,"path":"api/articles/事件流数据提取直线.json","keywords":null,"cover":"https://s2.loli.net/2025/02/17/NbtwF3exYQAgCik.jpg","content":"<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p>最近在跟导师做科研项目需要测量高频振动正好用到事件相机，需要提取事件流数据中的直线特征，在这里记录一下实验数据采集与处理的过程。</p>\n<h1 id=\"相机配置\"><a href=\"#相机配置\" class=\"headerlink\" title=\"相机配置\"></a>相机配置</h1><p><strong>事件相机</strong>：我们使用的是 inivation 的 DAVIS346 ，是一款346x240 分辨率的 DAVIS 相机。<br><strong>镜头</strong>：由于事件相机的分辨率受限，尽量使用长焦镜头可以得到更多的微振动细节信息，我们使用50cm焦段的变焦镜头。</p>\n<h1 id=\"系统搭建\"><a href=\"#系统搭建\" class=\"headerlink\" title=\"系统搭建\"></a>系统搭建</h1><p>我们使用直尺和砝码（重物）在椅子上构造了一个悬臂梁系统。使用事件相机的目的是测量尺子的振动频率与幅度，因此我们通过简单的架设相机和适当的补光，将事件相机对准悬臂梁系统。</p>\n<h1 id=\"软件采集\"><a href=\"#软件采集\" class=\"headerlink\" title=\"软件采集\"></a>软件采集</h1><p>使用 inivation 公司提供的DV软件进行事件相机的数据采集， DV 的功能已经相对完善，但是由于一些软件 bug ，切换不同的可视化页面容易闪退，因此受不了的也可以自己DIY写脚本进行采集。采集的数据为 .aedat4 文件，这是 inivation 自己的一种文件格式（详情可以参考 <a href=\"https://docs.inivation.com/software/software-advanced-usage/file-formats/index.html\">doc</a> ）</p>\n<h1 id=\"事件数据\"><a href=\"#事件数据\" class=\"headerlink\" title=\"事件数据\"></a>事件数据</h1><p>由于事件相机的事件流数据的特殊之处，我们采集得到的 aedat4 文件里面存储的数据不能像常规处理 RGB 相机那样直接对图像进行处理，aedat4 里的一个事件读取出来的结果是 <strong>[x坐标，y坐标，t时间戳，p极性]</strong> ，其所代表的含义就是在 t 时间点时，事件相机的 CMOS 坐标 (x,y) 光强变化 p 是 + or -。</p>\n<p>因此我想到了有两种方法来处理事件数据：</p>\n<ol>\n<li>最直接的处理就是将 t 作为第三个坐标轴，极性不参与考虑，将事件数据转变成 3D 点云数据，按照点云的处理方法来处理事件数据。</li>\n<li>我们也可以将事件数据进行时间上的切片与积累，例如每次处理 10ms（100Hz）的数据，直接得到一个事件流的积累图像，即一个二维的图像，很多方法就可以沿用以前处理RGB图像的方法了。</li>\n</ol>\n<h1 id=\"数据预处理\"><a href=\"#数据预处理\" class=\"headerlink\" title=\"数据预处理\"></a>数据预处理</h1><p>我采用的是上述的方法2进行事件数据的初步预处理，可以得到类似下图的效果，红色为负极性事件，绿色为正极性事件</p>\n<div align=center><img src=\"https://s2.loli.net/2025/02/18/o6ZWOJY2nAQ3qKz.png\"></div>\n\n<p>然后进行事件数据的降噪，排除掉周围噪点，得到下图效果。</p>\n<div align=center><img src=\"https://s2.loli.net/2025/02/18/QWeSzZfPAV3qF5M.png\"></div>\n\n\n<h1 id=\"直线提取\"><a href=\"#直线提取\" class=\"headerlink\" title=\"直线提取\"></a>直线提取</h1><p>直线的提取我试过的方法共有两种，最简单直接的就是直接用 LSD 进行直线的提取，这个通过 openCV 直接调库就能简单实现，LSD 也有很多参数可以进行调整，调一调的效果也许会比较好，在下面我贴出我使用 LSD 跑出来的结果，只能说差强人意，太吃数据了，跑出来的结果与其说是提取直线，我倒是觉得像是提取边缘。我调研到的用 LSD 提线的效果比较好的场景是 2D 激光雷达，对于事件相机这种相对弥散的点数据来说 LSD 真不太行。</p>\n<div align=center><img src=\"https://s2.loli.net/2025/02/18/7EuGeZoYak9QzVB.png\"></div>\n\n\n\n<p>第二种我采用的方案是 DBSCAN 聚类 + RANSAC 拟合直线的方法来进行直线的提取，这种方法对于我们这种希望在事件数据弥散点云中提取出直线信息的目的更为契合。DBSCAN 聚类能有效的将不同的事件分类成簇，再使用 RANSAC 能排除杂散点有效的拟合最符合的直线作为我们认定的直线特征。结果如下视频所示。</p>\n<div align=\"center\">\n  <iframe width=\"100%\" height=\"100%\" style=\"min-height: 400px;max-width: 1000px; max-height: 600px;\" src=\"https://live.csdn.net/v/embed/464099\" frameborder=\"0\" allowfullscreen></iframe>\n</div>\n\n<h1 id=\"后记\"><a href=\"#后记\" class=\"headerlink\" title=\"后记\"></a>后记</h1><p>本次实验所采用的方法还是以往的机器学习方法，在现在深度学习发展很火热的情况下，只要不是追求实时的提线，做检测而不是监测，那么深度学习的方法是可以去钻研钻研的。</p>\n","feature":true,"text":"前言最近在跟导师做科研项目需要测量高频振动正好用到事件相机，需要提取事件流数据中的直线特征，在这里记录一下实验数据采集与处理的过程。 相机配置事件相机：我们使用...","permalink":"/post/事件流数据提取直线","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"ComputerVision","slug":"ComputerVision","count":2,"path":"api/categories/ComputerVision.json"}],"tags":[{"name":"event-base","slug":"event-base","count":1,"path":"api/tags/event-base.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%89%8D%E8%A8%80\"><span class=\"toc-text\">前言</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E7%9B%B8%E6%9C%BA%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">相机配置</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BA\"><span class=\"toc-text\">系统搭建</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E8%BD%AF%E4%BB%B6%E9%87%87%E9%9B%86\"><span class=\"toc-text\">软件采集</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%BA%8B%E4%BB%B6%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">事件数据</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86\"><span class=\"toc-text\">数据预处理</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E7%9B%B4%E7%BA%BF%E6%8F%90%E5%8F%96\"><span class=\"toc-text\">直线提取</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%90%8E%E8%AE%B0\"><span class=\"toc-text\">后记</span></a></li></ol>","author":{"name":"Yesord","slug":"blog-author","avatar":"/img/avatar/Flametail.gif","link":"/","description":"猫军阀军校的一个三年级学牲。","socials":{"github":"https://github.com/Yesord","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/aoliba_believer","juejin":"","customs":{"Home":{"icon":"/img/Home.svg","link":"https://home.yesord.top/about/"},"Academic":{"icon":"/img/Academic.svg","link":"https://academic.yesord.top"},"Travelling":{"icon":"/img/train.svg","link":"https://www.travellings.cn/go.html"}}}},"mapped":true,"hidden":false,"prev_post":{},"next_post":{"title":"python环境搭建","uid":"5ba4847e568bd703f1becbdbb108530a","slug":"python环境搭建","date":"2024-09-09T14:55:02.000Z","updated":"2024-11-07T03:06:53.914Z","comments":true,"path":"api/articles/python环境搭建.json","keywords":null,"cover":"https://s2.loli.net/2024/09/09/6SJ9PlavDYmsKWn.jpg","text":"前言作为工科生，环境搭建是必不可少的一种能力，学会环境搭建是小白步向菜鸟的第一步。python是一门相对较新的语言，我记得在我读中学的时候这个时候python还...","permalink":"/post/python环境搭建","photos":[],"count_time":{"symbolsCount":"3k","symbolsTime":"3 mins."},"categories":[],"tags":[{"name":"python","slug":"python","count":5,"path":"api/tags/python.json"}],"author":{"name":"Yesord","slug":"blog-author","avatar":"/img/avatar/Flametail.gif","link":"/","description":"猫军阀军校的一个三年级学牲。","socials":{"github":"https://github.com/Yesord","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/aoliba_believer","juejin":"","customs":{"Home":{"icon":"/img/Home.svg","link":"https://home.yesord.top/about/"},"Academic":{"icon":"/img/Academic.svg","link":"https://academic.yesord.top"},"Travelling":{"icon":"/img/train.svg","link":"https://www.travellings.cn/go.html"}}}},"feature":true}}