{"title":"树莓派数字识别——openCV方法","uid":"71bced55db8d61b5404a5480e19d78af","slug":"树莓派数字识别——openCV方法","date":"2024-07-22T15:50:17.000Z","updated":"2024-11-04T05:31:50.253Z","comments":true,"path":"api/articles/树莓派数字识别——openCV方法.json","keywords":null,"cover":"https://s2.loli.net/2024/07/22/jvEhAONaoZWue6P.jpg","content":"<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p>本项目是树莓派识别数字的小例程<br>电赛备赛时写的，实现对1-8的数字识别并与下位机通信控制小车进行运动</p>\n<hr>\n<p><img src=\"https://s2.loli.net/2024/07/23/ANWPnEUaByL3oKv.jpg\" alt=\"_20240723092005.jpg\"></p>\n<hr>\n<h1 id=\"项目前置\"><a href=\"#项目前置\" class=\"headerlink\" title=\"项目前置\"></a>项目前置</h1><h2 id=\"python-版本要求\"><a href=\"#python-版本要求\" class=\"headerlink\" title=\"python 版本要求\"></a>python 版本要求</h2><div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">TIP</p>\n<p>python&gt;&#x3D;3.6</p>\n</div>\n<h2 id=\"库依赖要求\"><a href=\"#库依赖要求\" class=\"headerlink\" title=\"库依赖要求\"></a>库依赖要求</h2><p>做图像处理</p>\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">TIP</p>\n<p>numpy<br>opencv-python</p>\n</div>\n<p>做引脚操控</p>\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">TIP</p>\n<p>RPi.GPIO<br>pyserial<br>rpi-lgpi</p>\n</div>\n<h1 id=\"项目主体\"><a href=\"#项目主体\" class=\"headerlink\" title=\"项目主体\"></a>项目主体</h1><h2 id=\"主要实现思路\"><a href=\"#主要实现思路\" class=\"headerlink\" title=\"主要实现思路\"></a>主要实现思路</h2><p><strong>传统图像处理，使用模板匹配</strong></p>\n<h2 id=\"主要步骤\"><a href=\"#主要步骤\" class=\"headerlink\" title=\"主要步骤\"></a>主要步骤</h2><p>:::warning</p>\n<ol>\n<li>对模板图像进行预处理，得到1-8总共8个模板</li>\n<li>对识别图像进行预处理，将图像二值化转换取出矩形区域组成ROI区域</li>\n<li>ROI和模板做模板匹配<br>:::</li>\n</ol>\n<h2 id=\"详细过程\"><a href=\"#详细过程\" class=\"headerlink\" title=\"详细过程\"></a>详细过程</h2><p>仅展示部分源码，详细源码可以去 <a href=\"https://github.com/GreatPowerTrio/Cyber-Vanguard\">GitHub库</a></p>\n<h3 id=\"模板图像预处理\"><a href=\"#模板图像预处理\" class=\"headerlink\" title=\"模板图像预处理\"></a>模板图像预处理</h3><hr>\n<p><img src=\"https://s2.loli.net/2024/07/22/Q1OvxlUdSD3mifr.jpg\" alt=\"num_template.jpg\"></p>\n<hr>\n<p>模板预览图本身是含有八个数字带外接矩形黑框的一张图，我们对它作二值化处理，在对二值化模板图像边缘提取，通过轮廓检测将模板的轮廓提取，在将其外接矩形坐标画出来，在对不同数字1-8进行排序，最后将整个图像按比例内截，在重排成（100，150）的固定的模板存入字典。</p>\n<hr>\n<div class=\"language-python\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">python</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 定义需识别数字</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">to_detect_num </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">None</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 硬件初始化</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">ser </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">hardware_init</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">template </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">imread</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">osp</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">join</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">template_dir</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">num_template.jpg</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">gray_template </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">cvtColor</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">template</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">COLOR_BGR2GRAY</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #82AAFF\">print</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">二值化模板图像已读取</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 边缘检测</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">edged_template </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Canny</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">template</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">80</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">200</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\"># 边缘低阈值75和高阈值20</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 轮廓检测</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">template_contours</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> hierarchy </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">findContours</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">edged_template</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">RETR_EXTERNAL</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">CHAIN_APPROX_SIMPLE</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 读取模板轮廓的矩形坐标</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> w</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> h </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">boundingRect</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">template_contours</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">])</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #82AAFF\">print</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">f</span><span style=\"color: #C3E88D\">&#39;检测到</span><span style=\"color: #F78C6C\">&#123;</span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">template_contours</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #F78C6C\">&#125;</span><span style=\"color: #C3E88D\">个轮廓&#39;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 模板数字排序 1-8 (太菜了写不出自动排序的脚本 &gt;_&lt; )</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">sorted_template_contours </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">template_contours</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">],</span><span style=\"color: #BABED8\"> template_contours</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">],</span><span style=\"color: #BABED8\"> template_contours</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">],</span><span style=\"color: #BABED8\">template_contours</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">],</span><span style=\"color: #BABED8\"> template_contours</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">7</span><span style=\"color: #89DDFF\">],</span><span style=\"color: #BABED8\"> template_contours</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">6</span><span style=\"color: #89DDFF\">],</span><span style=\"color: #BABED8\"> template_contours</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">],</span><span style=\"color: #BABED8\"> template_contours</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">]]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 构造模板字典</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">digit_dict </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 分割模板图像</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> c</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">in</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">enumerate</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">sorted_template_contours</span><span style=\"color: #89DDFF\">):</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> w</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> h</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">boundingRect</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">c</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    roi </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> gray_template</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">y</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">y</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\">h</span><span style=\"color: #89DDFF\">-</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> x</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\">w</span><span style=\"color: #89DDFF\">-</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    roi </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">resize</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">roi</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">150</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    digit_dict</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> roi</span></span></code></pre></div><h3 id=\"识别图像预处理\"><a href=\"#识别图像预处理\" class=\"headerlink\" title=\"识别图像预处理\"></a>识别图像预处理</h3><p>从摄像头获取视频流，将其缩放固定比例减少后续的运算量，转换为灰度图并应用高斯模糊将锐度过高的区域排除边缘和消除噪点，再使用Canny边缘检测，提取边缘后进行膨胀，得到识别数字完整的矩形边缘轮廓。通过轮廓检测再将轮廓面积最大的前5个轮廓进行提取并排序，计算轮廓周长，进行近似轮廓，看是否能构成四边形，将能构成四边形的轮廓且面积符合一定要求的轮廓进行筛选，并通过两个矩形左x坐标的大小来判断数字的左右并重排。本身通过相机拍到的矩形数字框就不可能是正好的矩形，需要我们进行图像变换，因此进行透射变换，将提取到的四边形变换成矩形然后二值化。</p>\n<hr>\n<p><img src=\"https://s2.loli.net/2024/07/23/T2kZeb4Yzulom9X.png\" alt=\" 2024-07-23 093753.png\"></p>\n<hr>\n<p><img src=\"https://s2.loli.net/2024/07/23/A2sqokG8RFVNEJb.png\" alt=\" 2024-07-23 093415.png\"></p>\n<hr>\n<div class=\"language-python\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">python</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 初始化视频捕获对象</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">cap </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">VideoCapture</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">while</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">True:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\"># 逐帧读取视频</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    start_time </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">time</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ret</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> frame </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cap</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">read</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">not</span><span style=\"color: #BABED8\"> ret</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">break</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\"># 图像resize</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ratio </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> frame</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">shape</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">/</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">500.0</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    orig_frame </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> frame</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">copy</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\"># 转换为灰度图像</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    gray_img </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">cvtColor</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">orig_frame</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">COLOR_BGR2GRAY</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\"># 应用高斯模糊</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    blur_img </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">GaussianBlur</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">gray_img</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\"># Canny 边缘检测</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    edged_img </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Canny</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">blur_img</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> low_threshold</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> high_threshold</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\"># 边缘低阈值75和高阈值200</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">imshow</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">edged_img</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\">edged_img</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\"># 定义膨胀操作的核</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    kernel </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getStructuringElement</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">MORPH_RECT</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\"># 对边缘检测后的图像进行膨胀操作</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    dilated_img </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">dilate</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">edged_img</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> kernel</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #BABED8; font-style: italic\">iterations</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">imshow</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Dilated Image</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> dilated_img</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\"># 轮廓检测</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    contours</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> _ </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">findContours</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">edged_img</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">RETR_EXTERNAL</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">CHAIN_APPROX_SIMPLE</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sorted_contours </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">sorted</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">contours</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #BABED8; font-style: italic\">key</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #82AAFF\">cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">contourArea</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #BABED8; font-style: italic\">reverse</span><span style=\"color: #89DDFF\">=True)[:</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    i </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    screenCnt </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\">  </span><span style=\"color: #676E95; font-style: italic\"># 在循环开始前初始化screenCnt</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    output </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> c </span><span style=\"color: #89DDFF; font-style: italic\">in</span><span style=\"color: #BABED8\"> sorted_contours</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #676E95; font-style: italic\"># 计算轮廓周长</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        peri </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">arcLength</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">c</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">True)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #676E95; font-style: italic\"># 近似轮廓  0.02*peri为近似精度</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        approx </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">approxPolyDP</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">c</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">0.02</span><span style=\"color: #89DDFF\">*</span><span style=\"color: #82AAFF\">peri</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">True)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #676E95; font-style: italic\"># 如果近似轮廓有四个顶点，则认为找到了数字边缘</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">approx</span><span style=\"color: #89DDFF\">)==</span><span style=\"color: #F78C6C\">4</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">and</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">contourArea</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">approx</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10000</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">and</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">contourArea</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">approx</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">45000</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #676E95; font-style: italic\">#num_detect.shrink_approx(approx, 3)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            screenCnt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">append</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">approx</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            i </span><span style=\"color: #89DDFF\">+=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF; font-style: italic\">break</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\"># 根据检测到的两个数字的x左坐标来判断左右并排序</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">screenCnt</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        num_detect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">left_right_sort</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">screenCnt</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #676E95; font-style: italic\"># print(f&quot;左:&#123;screenCnt[0]&#125;, 右:&#123;screenCnt[1]&#125;&quot;)     </span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\"># 在尝试展示轮廓之前检查screenCnt是否已定义</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> screenCnt </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">drawContours</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">frame</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> screenCnt</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">255</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">255</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        postion_count </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        warped_list </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        thresh_list </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> c </span><span style=\"color: #89DDFF; font-style: italic\">in</span><span style=\"color: #BABED8\"> screenCnt</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #676E95; font-style: italic\"># 检查轮廓c是否有点（即是否有效）</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> c</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">size</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #82AAFF\">print</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">找到一个空的轮廓，跳过。</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF; font-style: italic\">continue</span><span style=\"color: #BABED8\">  </span><span style=\"color: #676E95; font-style: italic\"># 跳过当前轮廓，继续下一个轮廓</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #676E95; font-style: italic\"># 透视变换</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            warped_list</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">append</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">num_detect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">four_point_transform</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">orig_frame</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> c</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">reshape</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #82AAFF\"> ratio</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            warped_list</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">postion_count</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">cvtColor</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">warped_list</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #82AAFF\">postion_count</span><span style=\"color: #89DDFF\">],</span><span style=\"color: #82AAFF\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">COLOR_BGR2GRAY</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            thresh_list</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">append</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">threshold</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">warped_list</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #82AAFF\">postion_count</span><span style=\"color: #89DDFF\">],</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">255</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">THRESH_BINARY</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">|</span><span style=\"color: #82AAFF\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">THRESH_OTSU</span><span style=\"color: #89DDFF\">)[</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">])</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #676E95; font-style: italic\"># 显示透视变换结果</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">imshow</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">f</span><span style=\"color: #C3E88D\">&quot;Thresh_</span><span style=\"color: #F78C6C\">&#123;</span><span style=\"color: #82AAFF\">postion_count</span><span style=\"color: #F78C6C\">&#125;</span><span style=\"color: #C3E88D\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> thresh_list</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #82AAFF\">postion_count</span><span style=\"color: #89DDFF\">])</span></span></code></pre></div><h3 id=\"ROI区域\"><a href=\"#ROI区域\" class=\"headerlink\" title=\"ROI区域\"></a>ROI区域</h3><p>首先将图像预处理得到的二值化图像进行重排，变成（150，100）的图像，再进行高斯模糊和腐蚀操作滤除噪点，边缘检测再次提取矩形框边缘，轮廓检测提取矩形框轮廓，最后将整个图像按比例内截，在重排成（100，150）的ROI区域送给下步模板匹配。</p>\n<hr>\n<p><img src=\"https://s2.loli.net/2024/07/23/mJKSCboDnTfFR2B.png\" alt=\" 2024-07-23 095047.png\"></p>\n<hr>\n<p><img src=\"https://s2.loli.net/2024/07/23/iBPjtf45hvx3pr8.png\" alt=\" 2024-07-23 101548.png\"></p>\n<hr>\n<div class=\"language-python\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">python</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> roi</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">size</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">  </span><span style=\"color: #676E95; font-style: italic\"># 检查roi是否为空</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    roi </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">resize</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">thresh_list</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #82AAFF\">postion_count</span><span style=\"color: #89DDFF\">],</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">150</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\"># 定义结构元素</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    kernel </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> np</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ones</span><span style=\"color: #89DDFF\">((</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #82AAFF\"> np</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">uint8</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    roi_blur </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">GaussianBlur</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">roi</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">7</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">7</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    roi_edge </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Canny</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">roi_blur</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">80</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">200</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    roi_eroded </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">erode</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">roi_edge</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> kernel</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #BABED8; font-style: italic\">iterations</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\"># 找到边缘的轮廓</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    roi_contours</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> _ </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">findContours</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">roi_edge</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">RETR_EXTERNAL</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">CHAIN_APPROX_SIMPLE</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> cnt </span><span style=\"color: #89DDFF; font-style: italic\">in</span><span style=\"color: #BABED8\"> roi_contours</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\">y</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\">w</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\">h</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">boundingRect</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">roi_edge</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">rectangle</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">roi</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> y</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">x</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #82AAFF\">w</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> y</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #82AAFF\">h</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">255</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">imshow</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">roi_edge</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\">roi_edge</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    roi </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">resize</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">roi</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #82AAFF\">y</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #82AAFF\">y</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #82AAFF\">h</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> x</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #82AAFF\">x</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #82AAFF\">w</span><span style=\"color: #89DDFF\">],(</span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">150</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    roi </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">resize</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">roi</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #F78C6C\">15</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">150</span><span style=\"color: #89DDFF\">-</span><span style=\"color: #F78C6C\">15</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #F78C6C\">12</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">-</span><span style=\"color: #F78C6C\">12</span><span style=\"color: #89DDFF\">],(</span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">150</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">imshow</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">f</span><span style=\"color: #C3E88D\">&quot;ROI</span><span style=\"color: #F78C6C\">&#123;</span><span style=\"color: #82AAFF\">postion_count</span><span style=\"color: #F78C6C\">&#125;</span><span style=\"color: #C3E88D\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> roi</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">print</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">ROI为空，跳过调整大小。</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">postion_count </span><span style=\"color: #89DDFF\">+=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span></span></code></pre></div><h3 id=\"模板匹配\"><a href=\"#模板匹配\" class=\"headerlink\" title=\"模板匹配\"></a>模板匹配</h3><p>将字典里的数字与模板图像取出与识别图像的ROI区域进行模板匹配，找到最适合的数字，再进行个赋值。</p>\n<div class=\"language-python\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">python</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 初始化模板匹配</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">scores </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">digit</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> digitROI</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">in</span><span style=\"color: #BABED8\"> digit_dict</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">items</span><span style=\"color: #89DDFF\">():</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    result </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">matchTemplate</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">roi</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> digitROI</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">TM_CCOEFF</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\"># 模板匹配</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">_</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> score</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> _</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> _</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">minMaxLoc</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">result</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    scores</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">append</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">score</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">trust </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">False</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\"># 找到最适合的数字，从scores中找到最大值的索引 + 1     1~8</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> score </span><span style=\"color: #89DDFF; font-style: italic\">in</span><span style=\"color: #BABED8\"> scores</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> score </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0.8</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        trust </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">True</span><span style=\"color: #BABED8\">      </span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> trust</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    output</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">append</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #FFCB6B\">str</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">scores</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">index</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">max</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">scores</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">))</span></span></code></pre></div><h3 id=\"下位机通信\"><a href=\"#下位机通信\" class=\"headerlink\" title=\"下位机通信\"></a>下位机通信</h3><p>通过串口去传输数据，将左右数字传给下位机MCU进行进一步的控制。</p>\n<div class=\"language-python\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">python</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> output </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]:</span><span style=\"color: #676E95; font-style: italic\"># 如果识别结果不为空</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> to_detect_num </span><span style=\"color: #89DDFF\">is</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">not</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">None:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\"># 如果这不是第一次检测</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF; font-style: italic\">in</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">range</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">output</span><span style=\"color: #89DDFF\">)):</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">putText</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">frame</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> output</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #82AAFF\">i</span><span style=\"color: #89DDFF\">],</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">screenCnt</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #82AAFF\">i</span><span style=\"color: #89DDFF\">][</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">][</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">][</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">],</span><span style=\"color: #82AAFF\"> screenCnt</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #82AAFF\">i</span><span style=\"color: #89DDFF\">][</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">][</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">][</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #82AAFF\"> cv2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">FONT_HERSHEY_SIMPLEX</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">0.8</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">255</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">output</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #82AAFF\">print</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">f</span><span style=\"color: #C3E88D\">&quot;左：</span><span style=\"color: #F78C6C\">&#123;</span><span style=\"color: #82AAFF\">output</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #F78C6C\">&#125;</span><span style=\"color: #C3E88D\">，右：</span><span style=\"color: #F78C6C\">&#123;</span><span style=\"color: #82AAFF\">output</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #F78C6C\">&#125;</span><span style=\"color: #C3E88D\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">hardware</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">UART_read</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">ser</span><span style=\"color: #89DDFF\">)==</span><span style=\"color: #C792EA\">b</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">O</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">):</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #82AAFF\">print</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">f</span><span style=\"color: #C3E88D\">&quot;发送</span><span style=\"color: #F78C6C\">&#123;</span><span style=\"color: #82AAFF\">output</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #F78C6C\">&#125;</span><span style=\"color: #C3E88D\">、</span><span style=\"color: #F78C6C\">&#123;</span><span style=\"color: #82AAFF\">output</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #F78C6C\">&#125;</span><span style=\"color: #C3E88D\">成功&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                hardware</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">UART_write</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">ser</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #C792EA\">f</span><span style=\"color: #C3E88D\">&#39;(</span><span style=\"color: #F78C6C\">&#123;</span><span style=\"color: #82AAFF\">output</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #F78C6C\">&#125;&#123;</span><span style=\"color: #82AAFF\">output</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #F78C6C\">&#125;</span><span style=\"color: #C3E88D\">)</span><span style=\"color: #BABED8\">\\r\\n</span><span style=\"color: #C3E88D\">&#39;</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">encode</span><span style=\"color: #89DDFF\">())</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">while</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">hardware</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">UART_read</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">ser</span><span style=\"color: #89DDFF\">)==</span><span style=\"color: #C792EA\">b</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">O</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">):</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            hardware</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">UART_write</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">ser</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #C792EA\">f</span><span style=\"color: #C3E88D\">&#39;(</span><span style=\"color: #F78C6C\">&#123;</span><span style=\"color: #82AAFF\">output</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #F78C6C\">&#125;&#123;</span><span style=\"color: #82AAFF\">output</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #F78C6C\">&#125;</span><span style=\"color: #C3E88D\">)</span><span style=\"color: #BABED8\">\\r\\n</span><span style=\"color: #C3E88D\">&#39;</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">encode</span><span style=\"color: #89DDFF\">())</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #82AAFF\">print</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">f</span><span style=\"color: #C3E88D\">&quot;发送</span><span style=\"color: #F78C6C\">&#123;</span><span style=\"color: #82AAFF\">output</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #F78C6C\">&#125;</span><span style=\"color: #C3E88D\">成功&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            to_detect_num </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">int</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">output</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">])</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #82AAFF\">print</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">f</span><span style=\"color: #C3E88D\">&quot;需要识别的数字为 </span><span style=\"color: #F78C6C\">&#123;</span><span style=\"color: #82AAFF\">output</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #F78C6C\">&#125;</span><span style=\"color: #C3E88D\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #82AAFF\">print</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">等待下位机OK</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            start_wait_OK </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">time</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #89DDFF\">(((</span><span style=\"color: #BABED8\">start_wait_OK </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\"> time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">time</span><span style=\"color: #89DDFF\">())*</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">)%</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">):</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                start_wait_OK </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">time</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #82AAFF\">print</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">等待超时</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                hardware</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">UART_write</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">ser</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #C792EA\">f</span><span style=\"color: #C3E88D\">&#39;(</span><span style=\"color: #F78C6C\">&#123;</span><span style=\"color: #82AAFF\">output</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #F78C6C\">&#125;&#123;</span><span style=\"color: #82AAFF\">output</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #F78C6C\">&#125;</span><span style=\"color: #C3E88D\">)</span><span style=\"color: #BABED8\">\\r\\n</span><span style=\"color: #C3E88D\">&#39;</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">encode</span><span style=\"color: #89DDFF\">())</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #82AAFF\">print</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">f</span><span style=\"color: #C3E88D\">&quot;发送</span><span style=\"color: #F78C6C\">&#123;</span><span style=\"color: #82AAFF\">output</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #F78C6C\">&#125;</span><span style=\"color: #C3E88D\">成功&quot;</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><h1 id=\"识别效果\"><a href=\"#识别效果\" class=\"headerlink\" title=\"识别效果\"></a>识别效果</h1><p>仅部分图片，有待补充</p>\n<hr>\n<p><img src=\"https://s2.loli.net/2024/07/22/STJ9CH23vQxImPk.jpg\" alt=\"5add31efe077d8bf27834f7cb80a2e6.jpg\"></p>\n<hr>\n<p><img src=\"https://s2.loli.net/2024/07/22/jPCUBqlNVrJywGu.jpg\" alt=\"58e2ee3769243023b28ab15b4334fb4.jpg\"></p>\n<hr>\n<div align=\"center\">\n  <iframe width=\"100%\" height=\"100%\" style=\"min-height: 400px;max-width: 1000px; max-height: 600px;\" src=\"https://live.csdn.net/v/embed/411703\" frameborder=\"0\" allowfullscreen></iframe>\n</div>\n\n<hr>\n","text":"前言本项目是树莓派识别数字的小例程电赛备赛时写的，实现对1-8的数字识别并与下位机通信控制小车进行运动 项目前置python 版本要求 TIP python>=...","permalink":"/post/树莓派数字识别——openCV方法","photos":[],"count_time":{"symbolsCount":"7.2k","symbolsTime":"7 mins."},"categories":[{"name":"MashineLearning","slug":"MashineLearning","count":2,"path":"api/categories/MashineLearning.json"}],"tags":[{"name":"python","slug":"python","count":4,"path":"api/tags/python.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%89%8D%E8%A8%80\"><span class=\"toc-text\">前言</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E9%A1%B9%E7%9B%AE%E5%89%8D%E7%BD%AE\"><span class=\"toc-text\">项目前置</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#python-%E7%89%88%E6%9C%AC%E8%A6%81%E6%B1%82\"><span class=\"toc-text\">python 版本要求</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%BA%93%E4%BE%9D%E8%B5%96%E8%A6%81%E6%B1%82\"><span class=\"toc-text\">库依赖要求</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E9%A1%B9%E7%9B%AE%E4%B8%BB%E4%BD%93\"><span class=\"toc-text\">项目主体</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%BB%E8%A6%81%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF\"><span class=\"toc-text\">主要实现思路</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%BB%E8%A6%81%E6%AD%A5%E9%AA%A4\"><span class=\"toc-text\">主要步骤</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%AF%A6%E7%BB%86%E8%BF%87%E7%A8%8B\"><span class=\"toc-text\">详细过程</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A8%A1%E6%9D%BF%E5%9B%BE%E5%83%8F%E9%A2%84%E5%A4%84%E7%90%86\"><span class=\"toc-text\">模板图像预处理</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%AF%86%E5%88%AB%E5%9B%BE%E5%83%8F%E9%A2%84%E5%A4%84%E7%90%86\"><span class=\"toc-text\">识别图像预处理</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#ROI%E5%8C%BA%E5%9F%9F\"><span class=\"toc-text\">ROI区域</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A8%A1%E6%9D%BF%E5%8C%B9%E9%85%8D\"><span class=\"toc-text\">模板匹配</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%8B%E4%BD%8D%E6%9C%BA%E9%80%9A%E4%BF%A1\"><span class=\"toc-text\">下位机通信</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E8%AF%86%E5%88%AB%E6%95%88%E6%9E%9C\"><span class=\"toc-text\">识别效果</span></a></li></ol>","author":{"name":"Yesord","slug":"blog-author","avatar":"https://s2.loli.net/2023/10/17/4GK2m3UkXztog9D.jpg","link":"/","description":"猫军阀军校的一个三年级学牲。","socials":{"github":"https://github.com/Yesord","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/aoliba_believer","juejin":"","customs":{"Home":{"icon":"/img/Home.svg","link":"https://home.yesord.top/about/"},"Academic":{"icon":"/img/Academic.svg","link":"https://academic.yesord.top"}}}},"mapped":true,"hidden":false,"prev_post":{"title":"三子棋对弈装置--视觉部分","uid":"46d63a6191ce7c7d772a0f14338f0d34","slug":"三子棋对弈装置-视觉部分","date":"2024-08-12T14:55:02.000Z","updated":"2024-11-04T05:31:50.252Z","comments":true,"path":"api/articles/三子棋对弈装置-视觉部分.json","keywords":null,"cover":"https://s2.loli.net/2024/07/22/9QG8dFxISpaDAq2.jpg","text":"前言本篇blog是本人在打2024电赛E题学习到的相关知识的整理，由于我们选择的方案是深度数据和RGB数据融合的方法来判断棋子的位置。不同于大多数人选择的ope...","permalink":"/post/三子棋对弈装置-视觉部分","photos":[],"count_time":{"symbolsCount":"37k","symbolsTime":"33 mins."},"categories":[{"name":"electronic","slug":"electronic","count":1,"path":"api/categories/electronic.json"}],"tags":[{"name":"ComputerVision","slug":"ComputerVision","count":3,"path":"api/tags/ComputerVision.json"}],"author":{"name":"Yesord","slug":"blog-author","avatar":"https://s2.loli.net/2023/10/17/4GK2m3UkXztog9D.jpg","link":"/","description":"猫军阀军校的一个三年级学牲。","socials":{"github":"https://github.com/Yesord","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/aoliba_believer","juejin":"","customs":{"Home":{"icon":"/img/Home.svg","link":"https://home.yesord.top/about/"},"Academic":{"icon":"/img/Academic.svg","link":"https://academic.yesord.top"}}}},"feature":false},"next_post":{"title":"树莓派搭建MC服务器","uid":"4e554f9d434ef086687ddd88dc6d7f86","slug":"树莓派搭建MC服务器","date":"2024-04-20T01:07:29.000Z","updated":"2024-11-04T05:31:50.253Z","comments":true,"path":"api/articles/树莓派搭建MC服务器.json","keywords":null,"cover":"https://s2.loli.net/2024/03/06/2lO9owWcAx4S6nf.jpg","text":"树莓派搭建MC服务器硬件配置树莓派4B：树莓派系统 下载java根据你希望搭建的MC版本来选择java版本 WARNING java8 : MC <= 1.16...","permalink":"/post/树莓派搭建MC服务器","photos":[],"count_time":{"symbolsCount":801,"symbolsTime":"1 mins."},"categories":[{"name":"game","slug":"game","count":1,"path":"api/categories/game.json"}],"tags":[{"name":"raspberrypi","slug":"raspberrypi","count":1,"path":"api/tags/raspberrypi.json"}],"author":{"name":"Yesord","slug":"blog-author","avatar":"https://s2.loli.net/2023/10/17/4GK2m3UkXztog9D.jpg","link":"/","description":"猫军阀军校的一个三年级学牲。","socials":{"github":"https://github.com/Yesord","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/aoliba_believer","juejin":"","customs":{"Home":{"icon":"/img/Home.svg","link":"https://home.yesord.top/about/"},"Academic":{"icon":"/img/Academic.svg","link":"https://academic.yesord.top"}}}}}}